# üê± Cat API Telegram Bot & Web Platform

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Telegram –±–æ—Ç–æ–º –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∫–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ The Cat API.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#Ô∏è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#Ô∏è-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [üìä API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [ü§ñ Telegram Bot](#-telegram-bot)
- [üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

## ÔøΩ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üé≤ **–°–ª—É—á–∞–π–Ω—ã–µ –∫–æ—Ç—ã** —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ—Ä–æ–¥–∞—Ö
- ‚ù§Ô∏è **–°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤** —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üèÜ **–õ–∏–¥–µ—Ä–±–æ—Ä–¥** —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Ä–æ–¥
- üîç **–£–º–Ω—ã–π –ø–æ–∏—Å–∫** –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º –ø–æ—Ä–æ–¥—ã
- üì± **Dual Interface**: Telegram –±–æ—Ç + –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîÑ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ WebSocket
- üë§ **Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## ÔøΩ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Backend:**

- Node.js v18.18.0+ —Å ES –º–æ–¥—É–ª—è–º–∏
- Express.js v4.18.2 - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- Telegraf.js v4.11.2 - Telegram Bot Framework
- Prisma ORM v6.16.2 - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- Awilix v12.0.0 - Dependency Injection

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**

- PostgreSQL (–ø—Ä–æ–¥–∞–∫—à–µ–Ω) / SQLite (dev) —á–µ—Ä–µ–∑ Prisma
- Redis v5.8.2 - —Å–µ—Å—Å–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- Helmet v8.1.0 - HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- CORS v2.8.5 - Cross-Origin Resource Sharing
- express-rate-limit v7.5.0 - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

**Frontend:**

- Tailwind CSS v3 - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- Vanilla JavaScript - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- WebSocket - real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

   ```bash
   git clone https://github.com/kotru21/cat-api-telegraf.git
   cd cat-api-telegraf
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

   ```bash
   npm install
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

   ```env
   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
   CATAPI_KEY=your-cat-api-key-from-thecatapi.com

   # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   PORT=5200
   WEBSITE_URL=http://localhost
   WEB_ENABLED=true
   BOT_ENABLED=true
   BOT_TOKEN=your-telegram-bot-token
   SESSION_SECRET=your-secret-key-here
   NODE_ENV=development
   DATABASE_URL=file:./prisma/main.db
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**

   ```bash
   npm run prisma:generate
   npm run prisma:migrate:dev
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**

   ```bash
   npm start
   ```

### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. **The Cat API –∫–ª—é—á:**

   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [thecatapi.com](https://thecatapi.com/)
   - –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API –∫–ª—é—á
   - –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` –∫–∞–∫ `CATAPI_KEY`

2. **Telegram Bot Token:**
   - –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/botfather) –≤ Telegram
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env` –∫–∞–∫ `BOT_TOKEN`

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è       | –¢–∏–ø     | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é            | –û–ø–∏—Å–∞–Ω–∏–µ                    |
| ---------------- | ------- | ----------------------- | --------------------------- |
| `CATAPI_KEY`     | string  | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**         | API –∫–ª—é—á The Cat API        |
| `PORT`           | number  | `5200`                  | –ü–æ—Ä—Ç HTTP/WebSocket —Å–µ—Ä–≤–µ—Ä–∞ |
| `WEBSITE_URL`    | string  | `http://localhost`      | –ë–∞–∑–æ–≤—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è      |
| `WEB_ENABLED`    | boolean | `true`                  | –í–∫–ª—é—á–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä         |
| `BOT_ENABLED`    | boolean | `true`                  | –í–∫–ª—é—á–∏—Ç—å Telegram –±–æ—Ç–∞      |
| `BOT_TOKEN`      | string  | –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ\*           | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞         |
| `SESSION_SECRET` | string  | `your-secret-key-here`  | –°–µ–∫—Ä–µ—Ç –¥–ª—è —Å–µ—Å—Å–∏–π           |
| `NODE_ENV`       | enum    | `development`           | –û–∫—Ä—É–∂–µ–Ω–∏–µ                   |
| `DATABASE_URL`   | string  | `file:./prisma/main.db` | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î     |
| `REDIS_URL`      | string  | –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ\*\*         | URL Redis –¥–ª—è —Å–µ—Å—Å–∏–π        |

\* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ `BOT_ENABLED=true`  
\*\* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Prisma ORM** —Å PostgreSQL –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏ SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### –ö–æ–º–∞–Ω–¥—ã Prisma

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã
npm run prisma:generate

# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run prisma:migrate:dev

# –ó–∞–ø—É—Å–∫ Prisma Studio (GUI –¥–ª—è –ë–î)
npm run prisma:studio
```

## ÔøΩ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

```http
GET /api/cat/:id              # –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ç–∞ –ø–æ ID
GET /api/leaderboard          # –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Ä–æ–¥
GET /api/similar              # –ü–æ–∏—Å–∫ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
POST /api/like                # –ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
DELETE /api/like              # –£–±—Ä–∞—Ç—å –ª–∞–π–∫ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
GET /api/profile              # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
POST /api/auth/telegram       # Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```

### Health checks

```http
GET /healthz                  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
GET /readyz                   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
```

## ü§ñ Telegram Bot

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞    | –û–ø–∏—Å–∞–Ω–∏–µ                    |
| ---------- | --------------------------- |
| `/start`   | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é  |
| `/fact`    | –°–ª—É—á–∞–π–Ω—ã–π –∫–æ—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π |
| `/mylikes` | –°–ø–∏—Å–æ–∫ –ª–∞–π–∫–Ω—É—Ç—ã—Ö –∫–æ—Ç–æ–≤      |
| `/top`     | –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Ä–æ–¥  |

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

- ‚ù§Ô∏è **–õ–∞–π–∫** - –ø–æ—Å—Ç–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –ª–∞–π–∫ –∫–æ—Ç—É
- üîç **–ü–æ—Ö–æ–∂–∏–µ** - –Ω–∞–π—Ç–∏ –∫–æ—Ç–æ–≤ —Å –ø–æ—Ö–æ–∂–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- üìä **–õ–∏–¥–µ—Ä–±–æ—Ä–¥** - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ—Ä–æ–¥—ã
- üé≤ **–ï—â–µ –∫–æ—Ç** - –ø–æ–ª—É—á–∏—Ç—å –µ—â–µ –æ–¥–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ—Ç–∞

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Production Requirements

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
NODE_ENV=production
CATAPI_KEY=your-cat-api-key
SESSION_SECRET=complex-random-string-min-32-chars
REDIS_URL=redis://localhost:6379
DATABASE_URL=postgresql://user:pass@host:5432/db

# Telegram (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –±–æ—Ç)
BOT_TOKEN=your-production-bot-token

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
WEBSITE_URL=https://yourdomain.com
```

### Heroku Deployment

```bash
# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
heroku create your-app-name
heroku addons:create heroku-postgresql:mini
heroku addons:create heroku-redis:mini

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
heroku config:set NODE_ENV=production
heroku config:set CATAPI_KEY=your-key
heroku config:set SESSION_SECRET=your-secret
heroku config:set BOT_TOKEN=your-bot-token

# –î–µ–ø–ª–æ–π
git push heroku main
```

---

## üîó Links

- **GitHub Repository**: [kotru21/cat-api-telegraf](https://github.com/kotru21/cat-api-telegraf)
- **The Cat API**: [thecatapi.com](https://thecatapi.com/)
- **Telegram Bot API**: [core.telegram.org/bots](https://core.telegram.org/bots)

---

‚≠ê **–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É –Ω–∞ GitHub!** ‚≠ê
