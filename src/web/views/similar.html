<!doctype html>
<html lang="ru">
  <head>
    <title>Похожие породы котов</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/js/tailwind.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
    <script type="module" src="/js/app.js"></script>
  </head>
  <body class="bg-gray-900 text-gray-100 font-inter" x-data="similarCats">
    <!-- INCLUDE_NAVIGATION -->

    <!-- Основной контент -->
    <div class="container mx-auto px-4 pt-28 pb-16">
      <div class="max-w-6xl mx-auto">
        <!-- Заголовок страницы с информацией о поиске -->
        <div class="text-center mb-12" x-show="!error">
          <h1 class="text-3xl font-bold mb-4">
            <span x-show="loading">Поиск похожих пород...</span>
            <span x-show="!loading" x-text="`Поиск по ${featureName}: ${searchValue}`"></span>
          </h1>
          <p class="text-gray-400">
            <span x-show="loading">Загрузка результатов...</span>
            <span x-show="!loading" x-text="`Найдено: ${totalItems} пород`"></span>
          </p>
        </div>

        <!-- Error State -->
        <div x-show="error" class="text-center py-12" style="display: none">
          <div class="bg-red-900/20 text-red-200 p-6 rounded-xl inline-block max-w-md">
            <i class="fas fa-exclamation-circle text-3xl mb-3"></i>
            <p x-text="error" class="text-lg"></p>
            <a
              href="/"
              class="inline-block mt-4 px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"
            >
              Вернуться на главную
            </a>
          </div>
        </div>

        <!-- Loading Skeleton -->
        <div x-show="loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          <template x-for="i in 6">
            <div class="bg-gray-800 rounded-xl overflow-hidden border border-gray-700 p-0">
              <div class="relative h-48 bg-gray-800 overflow-hidden">
                <div
                  class="absolute inset-0 animate-pulse bg-gradient-to-r from-gray-700 via-gray-600/40 to-gray-700"
                ></div>
              </div>
              <div class="p-5 space-y-3">
                <div class="h-5 w-3/4 rounded bg-gray-800 relative overflow-hidden">
                  <div
                    class="absolute inset-0 animate-pulse bg-gradient-to-r from-gray-700 via-gray-600/40 to-gray-700"
                  ></div>
                </div>
                <div class="h-4 w-1/2 rounded bg-gray-800 relative overflow-hidden">
                  <div
                    class="absolute inset-0 animate-pulse bg-gradient-to-r from-gray-700 via-gray-600/40 to-gray-700"
                  ></div>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- Results Grid -->
        <div x-show="!loading && !error" style="display: none">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            <template x-for="cat in displayedCats" :key="cat.id">
              <a
                :href="`/cat-details.html?id=${cat.id}`"
                class="block group bg-gray-800 rounded-xl overflow-hidden border border-gray-700 hover:border-blue-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10"
              >
                <div class="relative h-64 overflow-hidden">
                  <img
                    :src="cat.url"
                    :alt="cat.breeds?.[0]?.name"
                    class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
                  />
                  <div
                    class="absolute inset-0 bg-gradient-to-t from-gray-900/80 via-transparent to-transparent opacity-60"
                  ></div>
                  <div class="absolute bottom-0 left-0 right-0 p-4">
                    <h3
                      class="text-xl font-bold text-white mb-1"
                      x-text="cat.breeds?.[0]?.name || 'Unknown Breed'"
                    ></h3>
                    <p
                      class="text-sm text-gray-300 line-clamp-1"
                      x-text="cat.breeds?.[0]?.temperament || ''"
                    ></p>
                  </div>
                </div>
                <div class="p-4">
                  <div class="flex justify-between items-center text-sm text-gray-400">
                    <span x-text="cat.breeds?.[0]?.origin || 'Unknown'"></span>
                    <div class="flex items-center gap-1">
                      <i class="fas fa-heart text-red-500"></i>
                      <span x-text="cat.likes || 0"></span>
                    </div>
                  </div>
                </div>
              </a>
            </template>
          </div>

          <!-- Pagination -->
          <div class="flex justify-center items-center gap-2" x-show="totalPages > 1">
            <button
              @click="updatePage(currentPage - 1)"
              :disabled="currentPage === 1"
              class="w-10 h-10 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              :class="currentPage === 1 ? 'bg-gray-800 text-gray-500' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'"
            >
              <i class="fas fa-chevron-left"></i>
            </button>

            <template x-for="page in pages">
              <button
                @click="typeof page === 'number' ? updatePage(page) : null"
                class="w-10 h-10 rounded-lg flex items-center justify-center transition-colors"
                :class="page === currentPage ? 'bg-blue-600 text-white' : (typeof page === 'number' ? 'bg-gray-800 text-gray-300 hover:bg-gray-700' : 'text-gray-500 cursor-default')"
                x-text="page"
              ></button>
            </template>

            <button
              @click="updatePage(currentPage + 1)"
              :disabled="currentPage === totalPages"
              class="w-10 h-10 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              :class="currentPage === totalPages ? 'bg-gray-800 text-gray-500' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'"
            >
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
